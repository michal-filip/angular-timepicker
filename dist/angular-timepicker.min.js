/*! angular-timepicker 1.0.10 | (c) 2016, Geta AS | MIT (http://www.opensource.org/licenses/MIT) */
!function(a){"use strict";a.module("dnTimepicker",["dateParser"]).factory("dnTimepickerHelpers",["$window","$document",function(b,c){return{stringToMinutes:function(a){if(!a)return null;var b=a.match(/(\d+)(h?)/);return b[1]?b[1]*(b[2]?60:1):null},buildOptionList:function(b,c,d){for(var e=[],f=a.copy(b);c>=f;)e.push(new Date(f)),f.setMinutes(f.getMinutes()+d);return e},getClosestIndex:function(b,c){if(!a.isDate(b))return-1;for(var d=null,e=-1,f=60*b.getHours()+b.getMinutes(),g=0;g<c.length;g++){var h=c[g],i=60*h.getHours()+h.getMinutes();(null===d||Math.abs(i-f)<Math.abs(d-f))&&(d=i,e=g)}return e},position:function(d){function e(a){return a.nodeName?a:a[0]||a}function f(d){var e=d.getBoundingClientRect();return{width:Math.round(a.isNumber(e.width)?e.width:d.offsetWidth),height:Math.round(a.isNumber(e.height)?e.height:d.offsetHeight),top:Math.round(e.top+(b.pageYOffset||c[0].documentElement.scrollTop)),left:Math.round(e.left+(b.pageXOffset||c[0].documentElement.scrollLeft))}}function g(a){function d(a){return"static"===(b.getComputedStyle(a).position||"static")}for(var e=a.offsetParent||c[0].documentElement;e&&e!==c[0].documentElement&&d(e);)e=e.offsetParent;return e||c[0].documentElement}d=e(d);var h=f(d),i=g(d),j={top:0,left:0};return i!==c[0].documentElement&&(j=f(i),j.top+=i.clientTop-i.scrollTop,j.left+=i.clientLeft-i.scrollLeft),{width:Math.round(a.isNumber(h.width)?h.width:d.offsetWidth),height:Math.round(a.isNumber(h.height)?h.height:d.offsetHeight),top:Math.round(h.top-j.top),left:Math.round(h.left-j.left)}}}}]).directive("dnTimepicker",["$compile","$parse","$document","dateFilter","$dateParser","dnTimepickerHelpers","$log",function(b,c,d,e,f,g,h){return{restrict:"A",require:"ngModel",scope:{ngModel:"="},link:function(c,i,j,k){function l(b){return n||(n=a.isDate(c.ngModel)?c.ngModel:new Date),n.setHours(b.getHours()),n.setMinutes(b.getMinutes()),n.setSeconds(b.getSeconds()),m(n),n}function m(b){a.isDate(b)||(b=f(c.ngModel,c.timepicker.timeFormat),isNaN(b)&&h.warn("Failed to parse model.")),a.isDate(b)&&(q=b),n=b}var n=null,o=[],p=!0,q=null,r=null;c.timepicker={element:null,timeFormat:"h:mm a",minTime:f("0:00","H:mm"),maxTime:f("23:59","H:mm"),step:15,isOpen:!1,activeIdx:-1,optionList:function(){return p&&(o=g.buildOptionList(c.timepicker.minTime,c.timepicker.maxTime,c.timepicker.step),p=!1),o}},j.$observe("dnTimepicker",function(a){a&&(c.timepicker.timeFormat=a),k.$render()}),j.$observe("minTime",function(a){a&&(c.timepicker.minTime=f(a,c.timepicker.timeFormat),p=!0)}),j.$observe("maxTime",function(a){a&&(c.timepicker.maxTime=f(a,c.timepicker.timeFormat),p=!0)}),j.$observe("step",function(a){if(a){var b=g.stringToMinutes(a);b&&(c.timepicker.step=b),p=!0}}),c.$watch("ngModel",function(a){m(a),k.$render()}),k.$render=function(){var b=i[0].selectionStart,d=i[0].selectionEnd;i.val(a.isDate(n)?e(n,c.timepicker.timeFormat):k.$viewValue?k.$viewValue:""),i[0].setSelectionRange(b,d)},k.$parsers.unshift(function(b){var d=a.isDate(b)?b:f(b,c.timepicker.timeFormat);return isNaN(d)?void k.$setValidity("time",!1):(k.$setValidity("time",!0),l(d))}),c.select=function(b){a.isDate(b)&&(k.$setViewValue(l(b)),k.$render())},c.isActive=function(a){return a===c.timepicker.activeIdx},c.setActive=function(a){c.timepicker.activeIdx=a},c.scrollToSelected=function(){if(c.timepicker.element&&c.timepicker.activeIdx>-1){var a=c.timepicker.element[0].children[c.timepicker.activeIdx];a.parentNode.scrollTop=a.offsetTop-50}},c.openPopup=function(){c.position=g.position(i),c.position.top=c.position.top+i.prop("offsetHeight"),c.timepicker.isOpen=!0,c.timepicker.activeIdx=g.getClosestIndex(c.ngModel,c.timepicker.optionList()),c.$digest(),c.scrollToSelected()},c.closePopup=function(){c.timepicker.isOpen&&(c.timepicker.isOpen=!1,a.isDate(c.ngModel)||(c.ngModel=q),c.$apply(),i[0].blur())},i.after(b(a.element("<div dn-timepicker-popup></div>"))(c)),i.bind("focus",function(){c.openPopup()}).bind("keypress keyup",function(a){38===a.which&&c.timepicker.activeIdx>0?(c.timepicker.activeIdx--,c.scrollToSelected()):40===a.which&&c.timepicker.activeIdx<c.timepicker.optionList().length-1?(c.timepicker.activeIdx++,c.scrollToSelected()):13===a.which&&c.timepicker.activeIdx>-1&&(38!==r&&40!==r||c.select(c.timepicker.optionList()[c.timepicker.activeIdx]),c.closePopup()),r=a.which,c.$digest()}).bind("keypress keydown",function(a){9!==a.which&&27!==a.which||c.closePopup()}),d.bind("click",function(a){c.timepicker.isOpen&&a.target!==i[0]&&c.closePopup()}),m(c.ngModel)}}}]).directive("dnTimepickerPopup",function(){return{restrict:"A",replace:!0,transclude:!1,template:'<ul class="dn-timepicker-popup dropdown-menu" ng-style="{display: timepicker.isOpen && \'block\' || \'none\', top: position.top+\'px\', left: position.left+\'px\'}"><li ng-repeat="time in timepicker.optionList()" ng-class="{active: isActive($index) }" ng-mouseenter="setActive($index)"><a ng-click="select(time)">{{time | date:timepicker.timeFormat}}</a></li></ul>',link:function(a,b){a.timepicker.element=b,b.find("a").bind("click",function(a){a.preventDefault()})}}})}(angular);
//# sourceMappingURL=angular-timepicker.min.js.map